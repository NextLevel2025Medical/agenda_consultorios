<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/htmx.org@1.9.12"></script>
  <title>{% block page_title %}{{ title or "Agenda de ConsultÃ³rios" }}{% endblock %}</title>
  <link rel="stylesheet" href="/static/globals.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600;700&display=swap" rel="stylesheet">

  <style>
    .brand-title{
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, "Noto Sans", "Liberation Sans", sans-serif !important;
      letter-spacing: 0.08em;
      font-weight: 800;
      text-transform: uppercase;
    }
  </style>
</head>

<body class="min-h-screen bg-slate-950 text-slate-100">
  <div class="mx-auto max-w-7xl px-6 py-8">
    <div class="flex items-center justify-between gap-6">
      <!-- LEFT: logo + tÃ­tulo variÃ¡vel -->
      <div class="flex items-center gap-4">
        <img
          src="/static/logo.png"
          alt="Concept Clinic"
          class="h-11 w-11 rounded-full"
          style="box-shadow: 0 10px 30px rgba(0,0,0,.45);"
        />

        {% set _header = (self.header_title() | trim) %}
        {% if _header %}
          <h1 class="brand-title text-3xl md:text-4xl" style="color: var(--gold-main);">
            {% block header_title %}{% endblock %}
          </h1>
        {% endif %}
      </div>

      <!-- RIGHT: aÃ§Ãµes padronizadas -->
      {% if current_user %}
        <div class="flex flex-col gap-2 items-end">
          {% if current_user.role in ("admin", "surgery") %}
            <a
              href="/hospedagem"
              class="block w-56 rounded-lg px-3 py-2 text-sm font-medium text-slate-100 hover:bg-white/10 transition text-right"
            >
                ğŸ¨ Hospedagem
            </a>
          {% endif %}

          {% if current_user.role in ("admin", "surgery") %}
            <a
              href="/bloqueios"
              class="block w-56 rounded-lg px-3 py-2 text-sm font-medium text-slate-100 hover:bg-white/10 transition text-right"
            >
              â›” Bloqueios de Agenda
            </a>
          {% endif %}

          {% if current_user.username == "johnny.ge" %}
            <a
              href="/relatorio_gustavo"
              class="block w-56 rounded-lg px-3 py-2 text-sm font-medium text-slate-100 hover:bg-white/10 transition text-right"
            >
              ğŸ“Š RelatÃ³rio Dr. Gustavo
            </a>
          {% endif %}

          <form method="post" action="/logout" class="w-56">
            <button
              type="submit"
              class="block w-full rounded-lg px-3 py-2 text-sm font-medium text-slate-100 hover:bg-white/10 transition text-right"
            >
              ğŸšª Sair
            </button>
          </form>
        </div>
      {% endif %}
    </div>

    <div class="mt-8">
      {% block content %}{% endblock %}
    </div>
  </div>
</body>
</html>
